var t,e,a,n;t=module.exports,e="generateContent",a=()=>g,Object.defineProperty(t,e,{get:a,set:n,enumerable:!0,configurable:!0});function l(t,e,a={}){return t.length===e?t:(t.push(a),l(t,e,a))}const i=t=>Array(t).fill({}),s={hLineWidth:function(){return 0},vLineWidth:function(){return 0}};function r(t,e,a="EN"){let n;const l=()=>new Intl.DateTimeFormat(a,{weekday:"long",year:"numeric",month:"numeric",day:"numeric"}).format(new Date(t));switch(e){case"number":n=new Intl.NumberFormat(a,{maximumSignificantDigits:6}).format(Number(t));break;case"date":case"date-time":n=l();break;default:n=t}return n}function o(t,e="EN"){const a=new Date(t);return new Intl.DateTimeFormat(e,{weekday:"long",year:"numeric",month:"numeric",day:"numeric"}).format(a)}function c(t,e="EN"){return new Intl.NumberFormat(e,{maximumSignificantDigits:6}).format(t)}const y=(t,e,a=3)=>{const n=Object.keys(t).map((n=>[{text:`${n} ${t[n].Key}`,style:"tableHeader",colSpan:a-1},...i(a-2),{text:`${r(t[n].Value,t[n].Type,e.languages[0])} ${t[n].Unit||""}`,style:"p",colSpan:1}]));return n?.length?[[{text:e.translate("SupplementaryInformation","otherFields"),style:"h5",colSpan:a},...i(a-1)],...n]:[]};function u(t,e,a){if(!t)return[];const{Property:n,Value:l,Minimum:i,Maximum:s,Unit:r}=t;return[[{text:`${a.translate(e,"certificateFields")} ${n||""}`,style:"tableHeader"},{},{},{alignment:"justify",columns:[{text:`${c(l,a.languages[0])} ${r||""}`,style:"p"},{text:i?`min ${c(i,a.languages[0])} ${r}`:"",style:"p"},{text:s?`max ${c(s,a.languages[0])} ${r}`:"",style:"p"}]}]]}function m(t,e,a){return t?.length?[[{text:a.translate(e,"certificateFields"),style:"tableHeader"},{},{},{text:`${t.map((({Value:t})=>c(t,a.languages[0]))).join(", ")} ${t[0]?.Unit||""}`,style:"p"}]]:[]}function p(t,e){const a=["C00","C01","C02","C03"],n=Object.keys(t).filter((e=>a.includes(e)&&t[e])).map((a=>[{text:e.translate(a,"certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t[a],style:"p"}])),l=t.SupplementaryInformation?y(t.SupplementaryInformation,e,4):[],r=t.TensileTest?function(t,e){const a=t.C10?[{text:e.translate("C10","certificateFields"),style:"tableHeader"},{},{},{text:t.C10,style:"p"}]:i(4),n=["C11","C12","C13"].filter((e=>t[e])).map((a=>u(t[a],a,e)[0]||[])),l=t.SupplementaryInformation?y(t.SupplementaryInformation,e,4):[];return[{text:e.translate("TensileTest","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",id:"TensileTest",table:{widths:[160,"*","*",300],body:[a,...n,...l]},layout:s}]}(t.TensileTest,e):[],o=t.HardnessTest?function(t,e){const a=t.C30?[{text:e.translate("C30","certificateFields"),style:"tableHeader"},{},{},{text:t.C30,style:"p"}]:i(4),n=t.C31?m(t.C31,"C31",e):[],l=t.C32?u(t.C32,"C32",e):[],r=t.SupplementaryInformation?y(t.SupplementaryInformation,e,4):[];return[{text:e.translate("HardnessTest","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:[a,...n,...l,...r]},layout:s}]}(t.HardnessTest,e):[],p=t.NotchedBarImpactTest?function(t,e){const a=t.C40?[{text:e.translate("C40","certificateFields"),style:"tableHeader"},{},{},{text:t.C40,style:"p"}]:i(4),n=t.C41?u(t.C41,"C41",e):[],l=t.C42?m(t.C42,"C42",e):[],r=t.C43?u(t.C43,"C43",e):[],o=t.SupplementaryInformation?y(t.SupplementaryInformation,e,4):[];return[{text:e.translate("NotchedBarImpactTest","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:[a,...n,...l,...r,...o]},layout:s}]}(t.NotchedBarImpactTest,e):[],d=t.OtherMechanicalTests?function(t,e){const a=Object.keys(t).map((e=>[{text:`${e} ${t[e].Key}`,style:"p"},{},{},{text:t[e].Value||"",style:"p"}]));return[{text:e.translate("OtherMechanicalTests","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:a},layout:s}]}(t.OtherMechanicalTests,e):[],x=t.ChemicalComposition?function(t,e){const a=t.C70?[{text:e.translate("C70","certificateFields"),style:"tableHeader"},{},{},{text:t.C70,style:"p"}]:i(4),n=function(t,e,a=15){const n=Object.keys(t).filter((t=>"C70"!==t&&"SupplementaryInformation"!==t)).map((e=>({key:e,value:t[e]}))),l=new Array(Math.ceil(n.length/a)).fill("").map((()=>n.splice(0,a))),i=[-2,2,-2,2];return l.map((t=>{const a=[[{text:"",style:"p"},...t.map((t=>({text:t.key,style:"p",margin:i})))],[{text:"Symbol",style:"p"},...t.map((t=>({text:t.value.Symbol,style:"p",margin:i})))],[{text:"Actual [%]",style:"p"},...t.map((t=>({text:c(t.value.Actual,e.languages[0]),style:"caption",margin:i})))]];if(t.some((t=>Object.prototype.hasOwnProperty.call(t.value,"Minimum")))){const n=[{text:"Minimum",style:"p"},...t.map((t=>({text:t.value?.Minimum?c(t.value.Minimum,e.languages[0]):"",style:"caption",margin:i})))];a.push(n)}if(t.some((t=>Object.prototype.hasOwnProperty.call(t.value,"Maximum")))){const n=[{text:"Maximun",style:"p"},...t.map((t=>({text:t.value?.Maximum?c(t.value.Maximum,e.languages[0]):"",style:"caption",margin:i})))];a.push(n)}return{style:"table",table:{widths:new Array(t.length+1).fill("").map(((t,e)=>0===e?45:25)),body:a},layout:s}}))}(t,e),l=t.SupplementaryInformation?y(t.SupplementaryInformation,e,4):[[{text:"",colSpan:4},{},{},{}]];return[{text:e.translate("ChemicalComposition","otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:[a]},layout:s},...n,{style:"table",table:{widths:[160,"*","*",300],body:l},layout:s}]}(t.ChemicalComposition,e):[];return[{text:`${e.translate("Inspection","certificateGroups")}`,style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{id:"Inspection",style:"table",table:{widths:[160,"*","*",300],body:[...n,...l]},layout:s},...r,...o,...p,...d,...x]}const d=(t,e,a,n=4)=>{const l=Object.keys(t).map((a=>[{text:`${a} ${t[a].Key}`,style:"tableHeader",colSpan:n-1},...i(n-2),{text:`${r(t[a].Value||"",t[a]?.Type||"string",e.languages[0])} ${t[a]?.Unit||""}`,style:"p"}]));return l?.length?[{text:e.translate(a,"otherFields"),style:"h4"},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:.5}]},{style:"table",table:{widths:[160,"*","*",300],body:l},layout:s}]:[]};function x(t,e){const a=function(t,e){return[[{text:e.translate("B02","certificateFields"),colSpan:4,style:"tableHeader"},{},{},{}],...Object.keys(t).map((a=>[{text:e.translate(a,"otherFields"),style:"caption",colSpan:3},{},{},{text:t[a].join(", "),style:"p"}]))]}(t.B02,e),n=["B01","B02","B09","B10","B11","B12","B12","B13","SupplementaryInformation"],l=Object.keys(t).filter((t=>!n.includes(t))).map((a=>[{text:e.translate(a,"certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t[a],style:"p"}])),i=function(t,e){return void 0===t?[]:[[{text:e.translate("B09","certificateFields"),style:"tableHeader",colSpan:4},{},{},{}],...Object.keys(t).filter((t=>"unit"!==t.toLowerCase())).map((a=>[{text:e.translate(a,"otherFields"),style:"caption",colSpan:3},{},{},{text:"Form"===a?e.translate(t[a],"otherFields"):`${t[a]} ${t.Unit||""}`,style:"p"}]))]}(t.B09,e),r=u(t.B10,"B10",e),o=u(t.B11,"B11",e),c=u(t.B12,"B12",e),m=u(t.B13,"B13",e),p=t.SupplementaryInformation?y(t.SupplementaryInformation,e,4):[];return[{text:`${e.translate("ProductDescription","certificateGroups")}`,style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{style:"table",id:"ProductDescription",table:{widths:[160,"*","*",300],body:[[{text:e.translate("B01","certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t.B01,style:"p"}],...a,...l,...i,...r,...o,...c,...m,...p]},layout:s}]}function b(t){return[[t.slice(0,3)],[l([...t.slice(3,t.length)],3,"")]]}function f(t,e){const[a,n]=function(t,e){const a=t.A04?[[{text:e.translate("A04","certificateFields"),style:"tableHeader"}]]:[],n=t.A04?[[{image:t.A04,width:150}]]:[],l=Object.keys(t).filter((t=>["A01","A06","A06.1","A06.2","A06.3"].includes(t)));return[[...a,...l.map((t=>[{text:e.translate(t,"certificateFields"),style:"tableHeader"}]))],[...n,...l.map((e=>[{text:t[e].CompanyName,style:"p"},{text:t[e].Street,style:"p"},{text:`${t[e].City},${t[e].ZipCode},${t[e].Country}`,style:"p"},{text:t[e]?.VAT_Id||"",style:"p"},{text:t[e].Email,style:"p"}]))]]}(t,e);if(a.length<=3){return{style:"table",table:{widths:[200,150,150],body:[l(a,3,""),l(n,3,"")]},layout:s}}const i=b(a),r=b(n);return{style:"table",table:{widths:[200,150,150],body:[...i[0],...r[0],...i[1],...r[1]]},layout:s}}class h{constructor(t,e=["EN"]){this.translations=t,this.languages=e}getField(t,e,a){const n=this.translations;return t in n&&e in n[t]&&a in n[t][e]?this.translations[t][e][a]:""}getTranslation(t,e){return this.languages.map((a=>this.getField(a,t,e))).join(" / ")}translate(t,e){return"certificateFields"===e?`${t} ${this.getTranslation(e,t)}`:this.getTranslation(e,t)}}function g(t,e){const a=new h(e,t.Certificate.CertificateLanguages);return[f(t.Certificate.CommercialTransaction,a),...function(t,e){const a=["A01","A04","A06","A06.1","A06.2","A06.3","SupplementaryInformation"],n=Object.keys(t).filter((t=>!a.includes(t))).map((a=>[{text:e.translate(a,"certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t[a],style:"p"}])),l=t.SupplementaryInformation?y(t.SupplementaryInformation,e,4):[];return[{text:`${e.translate("CommercialTransaction","certificateGroups")}`,style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{style:"table",id:"CommercialTransaction",table:{widths:[160,"*","*",300],body:[...n,...l]},layout:s}]}(t.Certificate.CommercialTransaction,a),...x(t.Certificate.ProductDescription,a),...p(t.Certificate.Inspection,a),...function(t,e){if(!t)return[{style:"table",id:"OtherTests",table:{widths:[160,"*","*",300],body:[i(4)]},layout:s}];const a=t.D01?[{text:e.translate("D01","certificateFields"),style:"tableHeader",colSpan:3},{},{},{text:t.D01,style:"p"}]:i(4),n=t.NonDestructiveTests?d(t.NonDestructiveTests,e,"NonDestructiveTests",4):[],l=t.OtherProductTests?d(t.OtherProductTests,e,"OtherProductTests",4):[];return[{text:`${e.translate("OtherTests","certificateGroups")}`,style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{style:"table",id:"OtherTests",table:{widths:[160,"*","*",300],body:[a]},layout:s},...n,...l]}(t.Certificate.OtherTests,a),...function(t,e){const a=t.SupplementaryInformation?y(t.SupplementaryInformation,e,3):[[{text:"",colSpan:3},{},{}]];return[{text:`${e.translate("Validation","certificateGroups")}`,style:"h2",margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:550,y2:0,lineWidth:1}]},{columns:[{style:"table",table:{widths:[160,"*",180],body:[[{text:e.translate("Z01","certificateFields"),style:"tableHeader",colSpan:2},{},{text:t.Z01,style:"p"}],[{text:e.translate("Z02","certificateFields"),style:"tableHeader",colSpan:2},{},{text:o(t.Z02,e.languages[0]),style:"p"}],[{text:e.translate("Z03","certificateFields"),style:"tableHeader",colSpan:2},{},{text:t?.Z03,style:"p"}]]},layout:s},{width:100,style:"table",table:{body:[[{image:t.Z04.CE_Image}],[{text:t.Z04.NotifiedBodyNumber,alignment:"center",bold:!0,style:"caption"}],[{text:t.Z04.DoCYear,alignment:"center",bold:!0,style:"caption"}],[{text:t.Z04.DoCNumber,alignment:"center",bold:!0,style:"caption"}]]},layout:s}]},{style:"table",table:{widths:[160,"*",300],body:a},layout:s}]}(t.Certificate.Validation,a),{style:"table",margin:[0,50,0,0],table:{widths:[280,250],body:[[{text:[{text:"Powered by ",style:"small",margin:[0,0,0,0]},{text:"en10204.io",style:"small",color:"blue",margin:[0,0,0,0],decoration:"underline",link:"https://en10204.io"}]},{text:t.RefSchemaUrl,style:"small",color:"#D3D3D3",margin:[0,0,0,0],alignment:"right"}]]},layout:s}]}